<div class="fixed">
  <div class="navbar" [class.mobile]="isMobile">
    <div class="title-area" (click)="backToStartPage()">
      <img src="assets/images/logo.svg" alt="logo" [width]="isMobile ? 36 : 52">
      <img src="assets/images/title.svg" alt="title" [width]="isMobile ? 180 : 255">
    </div>

    <span *ngIf="isMobile" style="flex: auto"></span>

    <span *ngIf="!isMobile" class="g-h6 select-year-label">選擇年份</span>

    <div class="select-wrapper year" [class.mobile]="isMobile" (click)="onSelectWrapperClick(yearSelect)">
      <mat-select #yearSelect [(ngModel)]="selectedYear" [hideSingleSelectionIndicator]="isMobile"
        (ngModelChange)="onSelectedYearChange($event)">
        <mat-option *ngFor="let year of yearList" [value]="year">
          {{year}}
        </mat-option>
      </mat-select>
    </div>

    <div *ngIf="!isMobile" class="select-wrapper county" [class.mobile]="isMobile"
      (click)="onSelectWrapperClick(countySelect)">
      <mat-select #countySelect [(ngModel)]="selectedCounty" [hideSingleSelectionIndicator]="isMobile"
        (ngModelChange)="onSelectedCountyChange($event)">
        <mat-option *ngFor="let county of counties" [value]="county">
          {{county['行政區別']}}
        </mat-option>
      </mat-select>
    </div>

    <span *ngIf="!isMobile" style="flex: auto"></span>

    <app-share-toolbox *ngIf="!isMobile"></app-share-toolbox>
  </div>

  <div *ngIf="isMobile" class="navbar mobile">
    <div class="select-wrapper county mobile" (click)="onSelectWrapperClick(countySelect)">
      <mat-select #countySelect [(ngModel)]="selectedCounty" [hideSingleSelectionIndicator]="isMobile"
        (ngModelChange)="onSelectedCountyChange($event)">
        <mat-option *ngFor="let county of counties" [value]="county">
          {{county['行政區別']}}
        </mat-option>
      </mat-select>
    </div>
  </div>
</div>

<div class="map-container" [class.mobile]="isMobile">
  <app-map-chart [towns]="selectedCountyTowns" [counties]="counties" [selectedCounty]="selectedCounty"
    [year]="selectedYear" (countyClick)="onMapCountyClick($event)"></app-map-chart>
</div>

<div class="main-container" [class.mobile]="isMobile">
  <h2 class="sub-title">全臺縣市總統得票</h2>

  <app-current-data-chart [townOrCounty]="selectedTown ?? selectedCounty"></app-current-data-chart>

  <app-history-data-chart></app-history-data-chart>

  <app-area-data-table [counties]="counties" [selectedCountyTowns]="selectedCountyTowns"></app-area-data-table>
</div>
